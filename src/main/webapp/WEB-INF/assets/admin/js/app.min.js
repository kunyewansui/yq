$(function(){var a=window.location.href;var d=$("#a_nav");d.find("a").each(function(){var f=$(this).context.href.trim();if(f!==""&&f!==$(this).context.origin+"/"&&a.indexOf(f)===0){var e=a.substr(f.length,1);if(e===""||e==="?"||e==="#"||e==="/"){$(this).parent("li").addClass("active");return false}}});d.find("li").each(function(){var f=$(this);if(f.has("ul").length>0){var e=$(f.find("a")[0]);e.addClass("auto");e.prepend("<span class='pull-right text-muted'><i class='fa fa-fw fa-angle-right text' style='line-height: 20px'></i><i class='fa fa-fw fa-angle-down text-active' style='line-height: 20px'></i></span>");e.on("click",function(g){g.preventDefault();$("a.auto").parent("li").removeClass("active");$(this).parent("li").addClass("active")});f.find("li.active").each(function(){$(this).parent("ul").siblings("a.auto").parent("li").addClass("active")})}});var c=$("#t_nav");c.find("a").each(function(){var f=$(this).context.href.trim();if(f!==""&&f!==$(this).context.origin+"/"&&a.indexOf(f)===0){var e=a.substr(f.length,1);if(e===""||e==="?"||e==="#"||e==="/"){$(this).addClass("active")}}});$("*[data-toggle-class]").on("click",function(){var g=$(this);var e=g.data("toggle-class").split(","),f=g.data("toggle-target");$.each(e,function(i,h){$(f).toggleClass(h)});g.toggleClass("active")});var b=false;$(".dropdown-toggle").on("click",function(){$(this).parents(".dropdown").toggleClass("open");setTimeout(function(){b=$(".dropdown").hasClass("open")},600)});$(document).on("click",function(f){if($(f.target).closest(".dropdown-menu").length===0){if(b){$(".dropdown").removeClass("open");b=false}}})});(function(a){a.fn.xsEnable=function(){var c=this.find("input");var e=this.find("select");var b=this.find("textarea");var f=this.find("button");var d=[];a.each(c,function(g,h){d.push(a(h))});a.each(e,function(g,h){d.push(a(h))});a.each(b,function(g,h){d.push(a(h))});a.each(f,function(g,h){d.push(a(h))});a.each(d,function(g,h){h.attr("disabled",false)})};a.fn.xsDisable=function(){var c=this.find("input");var e=this.find("select");var b=this.find("textarea");var f=this.find("button");var d=[];a.each(c,function(g,h){d.push(a(h))});a.each(e,function(g,h){d.push(a(h))});a.each(b,function(g,h){d.push(a(h))});a.each(f,function(g,h){d.push(a(h))});a.each(d,function(g,h){h.attr("disabled",true)})};a.fn.xsClean=function(){var c=this.find("input");var e=this.find("select");var b=this.find("textarea");var d=[];a.each(c,function(f,g){if(a(g).attr("type")==="button"||a(g).attr("type")==="submit"||a(g).data("ignore")){return true}if(a(g).data("value")){a(g).val(a(g).data("value"));return true}d.push(a(g))});a.each(e,function(f,g){if(a(g).data("ignore")){return true}d.push(a(g))});a.each(b,function(f,g){if(a(g).data("ignore")){return true}d.push(a(g))});a.each(d,function(f,g){g.val("")})};a.fn.xsSetInput=function(b,c){a(this.find("[name='"+b+"']")[0]).val(c)};a.fn.xsGetInput=function(b){return a(this.find("[name='"+b+"']")[0]).val()};a.fn.xsSetForm=function(e){var d;var f=this;var c=function(g,i){var h=g.split(".");for(var j in i){if(i[j] instanceof Object){c(h.concat(j).join("."),i[j])}else{f.xsSetInput(h.join(".")+"."+j,i[j])}}};if(e instanceof String){d=JSON.parse(e)}else{d=e}for(var b in d){if(d.hasOwnProperty(b)){if(d[b] instanceof Object){c(b,d[b])}else{this.xsSetInput(b,d[b])}}}};a.fn.xsJson=function(){var c=this.find("input");var f=this.find("select");var b=this.find("textarea");var e=[];a.each(c,function(g,h){if(a(h).attr("type")==="button"||a(h).attr("type")==="submit"){return true}e.push(a(h))});a.each(f,function(g,h){e.push(a(h))});a.each(b,function(g,h){e.push(a(h))});var d={};a.each(e,function(g,h){if(h.val()!=""){d[h.attr("name")]=h.val()}});return d};a.fn.xs=function(b,c){if(c===undefined){return this.attr("xs-"+b)}else{this.attr("xs-"+b,c)}};a.fn.xsDataValidate=function(b,c){if(c===undefined){return this.attr("validate-"+b)}else{this.attr("validate-"+b,c)}};a.fn.xsValidate=function(h){var c=this.find("input");var e=this.find("select");var b=this.find("textarea");function g(k){if(k.attr("type")==="button"||k.attr("type")==="submit"||k.data("ignore")){return}var l=k[0].attributes;var q={};var o={};for(var m=0;m<l.length;m++){if(l.item(m).name.indexOf("validate-")===0){var p=_validateSensitiveCaseChange(l.item(m).name.split("-")[1]);if(k.xsDataValidate(p)!==undefined&&k.xsDataValidate(p)!==""){var n=k.xsDataValidate(p);var j=n.split("|");if(j.length>1){if(j[0]==="true"){q[p]=true}else{q[p]=j[0]}o[p]=j[1]}}}}i[k.attr("name")]=q;f[k.attr("name")]=o}var i={};var f={};a.each(c,function(j,k){g(a(k))});a.each(e,function(j,k){g(a(k))});a.each(b,function(j,k){g(a(k))});var d=this.validate({rules:i,messages:f,submitHandler:h});return d}})(jQuery);$(function(){$("select[data-value]").each(function(b,c){var a=$(c);a.val(a.data("value"))})});var __oldRequestDataMap__={};function _isNewRequestData(d,e){var c,a;if(e instanceof Object){c=JSON.stringify(e)}else{c=e}if(__oldRequestDataMap__.hasOwnProperty(d)){var b=__oldRequestDataMap__[d];a=c!==b;if(a){__oldRequestDataMap__[d]=c}return a}else{__oldRequestDataMap__[d]=c;return true}}function _ajaxRequest(b,e,c,d,a){setTimeout(function(){var f=setTimeout(function(){showLoadingView()},800);if(a===undefined||a===null){a=function(g,h){alert("请求失败："+h+"\n错误码："+g.status)}}$.ajax({type:e,url:b,data:c,dataType:"json",beforeSend:function(g){g.setRequestHeader("Accept","application/json")},success:d,error:a,complete:function(){clearTimeout(f);hideLoadingView();delete __oldRequestDataMap__[b]}})},1000)}function _doPostEvent(b,c,d,a){_ajaxRequest(b,"POST",c,d,a)}function _doGetEvent(b,c,d,a){_ajaxRequest(b,"GET",c,d,a)}function doPost(b,c,d,a){if(_isNewRequestData(b,c)){_doPostEvent(b,c,d,a,true)}}function doGet(b,c,d,a){if(_isNewRequestData(b,c)){_doGetEvent(b,c,d,a)}}function uploadFile(b,c,d,a){if(a===undefined||a===null){a=function(e){alert("请求失败："+e.statusText+"\n错误码："+e.status)}}$.ajax({type:"POST",url:b,cache:false,data:c,processData:false,contentType:false,dataType:"json"}).done(d).fail(a)}function showLoadingView(){hideLoadingView();var a=$("<div>",{id:"xsLoadingView","class":"xs-loading"});a.append($("<i>",{"class":"fa fa-spinner fa-pulse"}));$("body").append(a)}function hideLoadingView(){$("#xsLoadingView").remove()}function imageUpload(b,d,c,f,a){var e=new FormData();e.append("folders",d);e.append("files",c);uploadFile(b,e,f,a)}function putImageIntoImageUploader(id,url){eval("images_"+id+".splice(0,images_"+id+".length)");eval("images_"+id+'.push("'+url+'")');eval("$url_"+id+'.val("'+url+'")');eval("updatePreviewDiv_"+id+"()")}function cleanImageInUploader(id){eval("images_"+id+".splice(0,images_"+id+".length)");eval("updatePreviewDiv_"+id+"()")};